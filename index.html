<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Flashfy</title>

    <!-- Canonical -->
    <link rel="canonical" href="https://flashfy.net/" id="canonical-link" />

    <!-- Canonical + SPA navigation sync -->
    <script>
      (function () {
        function canonicalFor(loc) {
          var origin = loc.origin || (loc.protocol + '//' + loc.host);
          var path = loc.pathname || '/';
          if (path === '') path = '/';
          if (path === '/') return origin + '/';
          return origin + path;
        }

        function updateCanonical() {
          var link = document.getElementById('canonical-link');
          if (!link) {
            link = document.createElement('link');
            link.rel = 'canonical';
            link.id = 'canonical-link';
            document.head.appendChild(link);
          }
          link.href = canonicalFor(window.location);

          if (window.gtag) {
            window.gtag('event', 'page_view', {
              page_location: window.location.href,
              page_path: window.location.pathname,
              page_title: document.title || 'Flashfy'
            });
          }
        }

        var _pushState = history.pushState;
        history.pushState = function () {
          var r = _pushState.apply(this, arguments);
          updateCanonical();
          return r;
        };

        var _replaceState = history.replaceState;
        history.replaceState = function () {
          var r = _replaceState.apply(this, arguments);
          updateCanonical();
          return r;
        };

        window.addEventListener('popstate', updateCanonical);
        updateCanonical();
      })();
    </script>

    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-61RSKY56P6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-61RSKY56P6', { send_page_view: true });
    </script>
  </head>

  <body class="bg-gray-50">
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
